{"version":3,"sources":["webpack:///webpack/bootstrap 8967ea84c0ea285d490d","webpack:///./src/server/db/index.ts","webpack:///./~/date-fns/parse/index.js","webpack:///external \"graphql-sequelize\"","webpack:///./src/server/config/index.js","webpack:///external \"ramda\"","webpack:///external \"passport\"","webpack:///external \"path\"","webpack:///./utils/hermes.ts","webpack:///external \"chalk\"","webpack:///./src/server/service/user.ts","webpack:///external \"express\"","webpack:///external \"graphql\"","webpack:///external \"sequelize\"","webpack:///./~/date-fns/start_of_iso_week/index.js","webpack:///./src/server/config/environments.ts","webpack:///./src/server/graphql/resolvers/iterations.ts","webpack:///./src/server/graphql/resolvers/posts.ts","webpack:///./src/server/graphql/iterations.ts","webpack:///./src/server/graphql/schema/posts.ts","webpack:///./src/server/graphql/schema/users.ts","webpack:///./utils/api/index.ts","webpack:///./webpack/models/Environment.ts","webpack:///./~/date-fns/get_iso_year/index.js","webpack:///./~/date-fns/is_date/index.js","webpack:///external \"awesome-typescript-loader\"","webpack:///external \"webpack\"","webpack:///./src/server/exceptionMonitoring.ts","webpack:///./src/server/http/authentication/index.ts","webpack:///./src/server/http/index.tsx","webpack:///./src/server/listen.ts","webpack:///./src/server/middleware.ts","webpack:///./src/server/serveFrontend.tsx","webpack:///./src/server/session.ts","webpack:///./utils/http/newApp.ts","webpack:///external \"helmet\"","webpack:///external \"newrelic\"","webpack:///./src/server/db/config/index.ts","webpack:///./src/server/db/models/iteration.ts","webpack:///./src/server/db/models/post.ts","webpack:///./src/server/db/models/user.ts","webpack:///./src/server/graphql/resolvers/user.ts","webpack:///./src/server/graphql/resolvers/users.ts","webpack:///./src/server/graphql/schema/index.ts","webpack:///./src/server/http/authentication/facebook.ts","webpack:///./src/server/http/authentication/mock.ts","webpack:///./src/server/http/graphql.ts","webpack:///./src/server/http/posts.ts","webpack:///./src/server/http/users.ts","webpack:///./src/server/main.tsx","webpack:///./src/server/service/authentication/index.ts","webpack:///./src/server/service/authentication/mock.ts","webpack:///./src/server/service/authentication/profile.mock.ts","webpack:///./src/server/service/post.mock.ts","webpack:///./src/server/service/post.ts","webpack:///./src/server/service/user.mock.ts","webpack:///./utils/date.ts","webpack:///./utils/models/index.ts","webpack:///./utils/test/string.ts","webpack:///./webpack/frontend/development.ts","webpack:///./webpack/frontend/index.ts","webpack:///./webpack/frontend/partials/base.ts","webpack:///./webpack/loaders/css-loader.ts","webpack:///./webpack/loaders/hot-typescript-loader.ts","webpack:///./webpack/loaders/typescript-loader.ts","webpack:///./webpack/partials/aliases.ts","webpack:///./~/date-fns/difference_in_calendar_days/index.js","webpack:///./~/date-fns/format/index.js","webpack:///./~/date-fns/get_day_of_year/index.js","webpack:///./~/date-fns/get_iso_week/index.js","webpack:///./~/date-fns/is_valid/index.js","webpack:///./~/date-fns/locale/_lib/build_formatting_tokens_reg_exp/index.js","webpack:///./~/date-fns/locale/en/build_distance_in_words_locale/index.js","webpack:///./~/date-fns/locale/en/build_format_locale/index.js","webpack:///./~/date-fns/locale/en/index.js","webpack:///./~/date-fns/start_of_day/index.js","webpack:///./~/date-fns/start_of_iso_year/index.js","webpack:///./~/date-fns/start_of_week/index.js","webpack:///./~/date-fns/start_of_year/index.js","webpack:///./src/server/db/config/index.js","webpack:///external \"body-parser\"","webpack:///external \"continuation-local-storage\"","webpack:///external \"dotenv\"","webpack:///external \"express-graphql\"","webpack:///external \"express-session\"","webpack:///external \"fs\"","webpack:///external \"html-webpack-plugin\"","webpack:///external \"passport-facebook\"","webpack:///external \"postcss-assets\"","webpack:///external \"postcss-cssnext\"","webpack:///external \"postcss-import\"","webpack:///external \"raven\"","webpack:///external \"util\"","webpack:///external \"webpack-combine-loaders\"","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///external \"webpack-merge\""],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;AChEA,8BAAiD;AACjD,oCAAsC;AAEtC,iCAA6D;AAC7D,iCAA6D;AAC7D,sCAA4E;AAE5E,mCAAwB;AACxB,IAAkB,eAAU,oBAAsB,GAAa;AAQ/D;AAOE;AAAA,oBAeC;AAED,aAAS,YAAG;AAAM,mBAAI,MAAO;AAAA;AAC7B,aAAY,eAAG;AAAM,mBAAI,MAAU;AAAA;AAjBjC,YAAgB,aAAmB;AACzB,mBAAI,MAAM,IAAgB,gBAAyB;AAE1D,YAAc,cAAE;AACb,iBAAU,YAAG,IAAc,WAAa,cAAE,SAChD;AAAM,eAAE;AACF,iBAAU,YAAG,IAAc,WAAC,SAAC,QAAS,UAAE,SAAC,QAAW,YAAE,SAAC,QAAS,UAAE,SACxE;AAAC;AAEG,aAAO;AACL,kBAAE,OAAS,QAAK,KAAW;AAC3B,kBAAE,OAAS,QAAK,KAAW;AACtB,uBAAE,YAAc,QAAK,KAElC;AALgB;AAKf;AAIH,WAAC;AAAA;AAED,IAAc,WAAG,IAAc;AAElB,QAAM,SAAW,SAAY;AAC7B,QAAS,YAAW,SAAe,e;;;;;;AC/ChD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB,EAAE;AAC3B;AACA,YAAY,EAAE;AACd,YAAY,EAAE;AACd,YAAY,EAAE;AACd;;AAEA,2BAA2B,EAAE;AAC7B;AACA,YAAY,EAAE;AACd,YAAY,EAAE;AACd,YAAY,EAAE;AACd;;AAEA;AACA,0BAA0B,EAAE;AAC5B,4BAA4B,EAAE;AAC9B,6BAA6B,EAAE,OAAO,EAAE;AACxC,6BAA6B,EAAE;AAC/B,8BAA8B,EAAE,OAAO,EAAE;;AAEzC;AACA,yBAAyB,EAAE;AAC3B,2BAA2B,EAAE,OAAO,EAAE;AACtC,6BAA6B,EAAE,OAAO,EAAE,OAAO,EAAE;;AAEjD;AACA;AACA;AACA,uCAAuC,EAAE;AACzC,yCAAyC,EAAE,OAAO,EAAE;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;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B;AAC5B,yBAGZ;AANG,aADK;AADD;AAUD,iBAAE,CAAC,IACV;AAZmD;AAYnD,E;;;;;;;;;;AChBF,+BAA4B;AAKf,QAAO,UAAG,UAAqB;AAA4B;AAC/D;AACE,qBAAE,CAAe,gBAAM,KAAK,KAAE,EAAQ,SAAS;AAKnD;;;;AACO,wBAAE,CAAO,QAAO,OAAO,OAAS;AAErC;AACA,qBAAM,KAAQ,QAGrB;AAJS;AATA;AAD8D;AAcvE,E;;;;;;ACnBF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,mBAAmB;AAC9B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa,YAAY;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,YAAY;AAC/B;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvUA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC1BA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACjCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,KAAK;AAChB,aAAa,QAAQ;AACrB,YAAY,UAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC3BA;AACA;AACA;AACA;AACA,0BAA0B,OAAO;AACjC,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,KAAK;;AAEL;;AAEA;AACA;AACA,0BAA0B,OAAO;AACjC,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,KAAK;;AAEL;AACA;AACA,sBAAsB,OAAO;AAC7B,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,KAAK;;AAEL;AACA;AACA,sBAAsB,OAAO;AAC7B,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,KAAK;;AAEL;AACA;AACA,sBAAsB,OAAO;AAC7B,KAAK;;AAEL;AACA;AACA,gBAAgB,OAAO;AACvB,KAAK;;AAEL;AACA;AACA,qBAAqB,OAAO;AAC5B,KAAK;;AAEL;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,6DAA6D,OAAO;AACpE;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;AClGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACVA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACxBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,gBAAgB;AAC9E;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACrCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,mBAAmB;AAC9B,aAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACTA,wC;;;;;;ACAA,uD;;;;;;ACAA,mC;;;;;;ACAA,4C;;;;;;ACAA,4C;;;;;;ACAA,+B;;;;;;ACAA,gD;;;;;;ACAA,8C;;;;;;ACAA,2C;;;;;;ACAA,4C;;;;;;ACAA,2C;;;;;;ACAA,kC;;;;;;ACAA,iC;;;;;;ACAA,oD;;;;;;ACAA,mD;;;;;;ACAA,mD;;;;;;ACAA,0C","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 48);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8967ea84c0ea285d490d","import * as cls from 'continuation-local-storage'\nimport * as Sequelize from 'sequelize'\n\nimport UserModel, {IUserModel} from '~/server/db/models/user'\nimport PostModel, {IPostModel} from '~/server/db/models/post'\nimport IterationModel, {IIterationModel} from '~/server/db/models/iteration'\n\nimport c from './config'\nconst database_url = require('../config/index.js').database_url\n\ninterface IModels {\n  User: IUserModel\n  Post: IPostModel\n  Iteration: IIterationModel\n}\n\nclass Database {\n  /** Models supported by our DB. */\n  private models: IModels\n\n  /** Instance of our Sequelize connection. */\n  private sequelize: Sequelize.Sequelize\n\n  constructor() {\n    const _Sequelize = Sequelize as any\n    _Sequelize.cls = cls.createNamespace('sequelize-transaction')\n\n    if (database_url) {\n      this.sequelize = new _Sequelize(database_url, c)\n    } else {\n      this.sequelize = new _Sequelize(c.database, c.facebookId, c.password, c)\n    }\n\n    this.models = {\n      User: UserModel(this.sequelize),\n      Post: PostModel(this.sequelize),\n      Iteration: IterationModel(this.sequelize),\n    }\n  }\n\n  getModels = () => this.models\n  getSequelize = () => this.sequelize\n}\n\nconst database = new Database()\n\nexport const models = database.getModels()\nexport const sequelize = database.getSequelize()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/db/index.ts","var isDate = require('../is_date/index.js')\n\nvar MILLISECONDS_IN_HOUR = 3600000\nvar MILLISECONDS_IN_MINUTE = 60000\nvar DEFAULT_ADDITIONAL_DIGITS = 2\n\nvar parseTokenDateTimeDelimeter = /[T ]/\nvar parseTokenPlainTime = /:/\n\n// year tokens\nvar parseTokenYY = /^(\\d{2})$/\nvar parseTokensYYY = [\n  /^([+-]\\d{2})$/, // 0 additional digits\n  /^([+-]\\d{3})$/, // 1 additional digit\n  /^([+-]\\d{4})$/ // 2 additional digits\n]\n\nvar parseTokenYYYY = /^(\\d{4})/\nvar parseTokensYYYYY = [\n  /^([+-]\\d{4})/, // 0 additional digits\n  /^([+-]\\d{5})/, // 1 additional digit\n  /^([+-]\\d{6})/ // 2 additional digits\n]\n\n// date tokens\nvar parseTokenMM = /^-(\\d{2})$/\nvar parseTokenDDD = /^-?(\\d{3})$/\nvar parseTokenMMDD = /^-?(\\d{2})-?(\\d{2})$/\nvar parseTokenWww = /^-?W(\\d{2})$/\nvar parseTokenWwwD = /^-?W(\\d{2})-?(\\d{1})$/\n\n// time tokens\nvar parseTokenHH = /^(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMM = /^(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\nvar parseTokenHHMMSS = /^(\\d{2}):?(\\d{2}):?(\\d{2}([.,]\\d*)?)$/\n\n// timezone tokens\nvar parseTokenTimezone = /([Z+-].*)$/\nvar parseTokenTimezoneZ = /^(Z)$/\nvar parseTokenTimezoneHH = /^([+-])(\\d{2})$/\nvar parseTokenTimezoneHHMM = /^([+-])(\\d{2}):?(\\d{2})$/\n\n/**\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If an argument is a string, the function tries to parse it.\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If all above fails, the function passes the given argument to Date constructor.\n *\n * @param {Date|String|Number} argument - the value to convert\n * @param {Object} [options] - the object with options\n * @param {0 | 1 | 2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = parse('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Parse string '+02014101',\n * // if the additional number of digits in the extended year format is 1:\n * var result = parse('+02014101', {additionalDigits: 1})\n * //=> Fri Apr 11 2014 00:00:00\n */\nfunction parse (argument, dirtyOptions) {\n  if (isDate(argument)) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime())\n  } else if (typeof argument !== 'string') {\n    return new Date(argument)\n  }\n\n  var options = dirtyOptions || {}\n  var additionalDigits = options.additionalDigits\n  if (additionalDigits == null) {\n    additionalDigits = DEFAULT_ADDITIONAL_DIGITS\n  } else {\n    additionalDigits = Number(additionalDigits)\n  }\n\n  var dateStrings = splitDateString(argument)\n\n  var parseYearResult = parseYear(dateStrings.date, additionalDigits)\n  var year = parseYearResult.year\n  var restDateString = parseYearResult.restDateString\n\n  var date = parseDate(restDateString, year)\n\n  if (date) {\n    var timestamp = date.getTime()\n    var time = 0\n    var offset\n\n    if (dateStrings.time) {\n      time = parseTime(dateStrings.time)\n    }\n\n    if (dateStrings.timezone) {\n      offset = parseTimezone(dateStrings.timezone)\n    } else {\n      // get offset accurate to hour in timezones that change offset\n      offset = new Date(timestamp + time).getTimezoneOffset()\n      offset = new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE).getTimezoneOffset()\n    }\n\n    return new Date(timestamp + time + offset * MILLISECONDS_IN_MINUTE)\n  } else {\n    return new Date(argument)\n  }\n}\n\nfunction splitDateString (dateString) {\n  var dateStrings = {}\n  var array = dateString.split(parseTokenDateTimeDelimeter)\n  var timeString\n\n  if (parseTokenPlainTime.test(array[0])) {\n    dateStrings.date = null\n    timeString = array[0]\n  } else {\n    dateStrings.date = array[0]\n    timeString = array[1]\n  }\n\n  if (timeString) {\n    var token = parseTokenTimezone.exec(timeString)\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '')\n      dateStrings.timezone = token[1]\n    } else {\n      dateStrings.time = timeString\n    }\n  }\n\n  return dateStrings\n}\n\nfunction parseYear (dateString, additionalDigits) {\n  var parseTokenYYY = parseTokensYYY[additionalDigits]\n  var parseTokenYYYYY = parseTokensYYYYY[additionalDigits]\n\n  var token\n\n  // YYYY or ±YYYYY\n  token = parseTokenYYYY.exec(dateString) || parseTokenYYYYY.exec(dateString)\n  if (token) {\n    var yearString = token[1]\n    return {\n      year: parseInt(yearString, 10),\n      restDateString: dateString.slice(yearString.length)\n    }\n  }\n\n  // YY or ±YYY\n  token = parseTokenYY.exec(dateString) || parseTokenYYY.exec(dateString)\n  if (token) {\n    var centuryString = token[1]\n    return {\n      year: parseInt(centuryString, 10) * 100,\n      restDateString: dateString.slice(centuryString.length)\n    }\n  }\n\n  // Invalid ISO-formatted year\n  return {\n    year: null\n  }\n}\n\nfunction parseDate (dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) {\n    return null\n  }\n\n  var token\n  var date\n  var month\n  var week\n\n  // YYYY\n  if (dateString.length === 0) {\n    date = new Date(0)\n    date.setUTCFullYear(year)\n    return date\n  }\n\n  // YYYY-MM\n  token = parseTokenMM.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    date.setUTCFullYear(year, month)\n    return date\n  }\n\n  // YYYY-DDD or YYYYDDD\n  token = parseTokenDDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    var dayOfYear = parseInt(token[1], 10)\n    date.setUTCFullYear(year, 0, dayOfYear)\n    return date\n  }\n\n  // YYYY-MM-DD or YYYYMMDD\n  token = parseTokenMMDD.exec(dateString)\n  if (token) {\n    date = new Date(0)\n    month = parseInt(token[1], 10) - 1\n    var day = parseInt(token[2], 10)\n    date.setUTCFullYear(year, month, day)\n    return date\n  }\n\n  // YYYY-Www or YYYYWww\n  token = parseTokenWww.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    return dayOfISOYear(year, week)\n  }\n\n  // YYYY-Www-D or YYYYWwwD\n  token = parseTokenWwwD.exec(dateString)\n  if (token) {\n    week = parseInt(token[1], 10) - 1\n    var dayOfWeek = parseInt(token[2], 10) - 1\n    return dayOfISOYear(year, week, dayOfWeek)\n  }\n\n  // Invalid ISO-formatted date\n  return null\n}\n\nfunction parseTime (timeString) {\n  var token\n  var hours\n  var minutes\n\n  // hh\n  token = parseTokenHH.exec(timeString)\n  if (token) {\n    hours = parseFloat(token[1].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR\n  }\n\n  // hh:mm or hhmm\n  token = parseTokenHHMM.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseFloat(token[2].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE\n  }\n\n  // hh:mm:ss or hhmmss\n  token = parseTokenHHMMSS.exec(timeString)\n  if (token) {\n    hours = parseInt(token[1], 10)\n    minutes = parseInt(token[2], 10)\n    var seconds = parseFloat(token[3].replace(',', '.'))\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE +\n      seconds * 1000\n  }\n\n  // Invalid ISO-formatted time\n  return null\n}\n\nfunction parseTimezone (timezoneString) {\n  var token\n  var absoluteOffset\n\n  // Z\n  token = parseTokenTimezoneZ.exec(timezoneString)\n  if (token) {\n    return 0\n  }\n\n  // ±hh\n  token = parseTokenTimezoneHH.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  // ±hh:mm or ±hhmm\n  token = parseTokenTimezoneHHMM.exec(timezoneString)\n  if (token) {\n    absoluteOffset = parseInt(token[2], 10) * 60 + parseInt(token[3], 10)\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  return 0\n}\n\nfunction dayOfISOYear (isoYear, week, day) {\n  week = week || 0\n  day = day || 0\n  var date = new Date(0)\n  date.setUTCFullYear(isoYear, 0, 4)\n  var fourthOfJanuaryDay = date.getUTCDay() || 7\n  var diff = week * 7 + day + 1 - fourthOfJanuaryDay\n  date.setUTCDate(date.getUTCDate() + diff)\n  return date\n}\n\nmodule.exports = parse\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/parse/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"graphql-sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql-sequelize\"\n// module id = 2\n// module chunks = 0","/**\n * Load environment variables from .env for local development.\n */\nconst R = require('ramda')\nconst {TEST_ENVS, getEnvVariables} = require('./environments.ts')\n\nconst env = getEnvVariables()\nconst isTesting = R.contains(env.NODE_ENV, TEST_ENVS)\n\nmodule.exports = {\n  port: env.PORT,\n  host: env.HOST,\n  env: env.NODE_ENV,\n  database_url: env.DATABASE_URL,\n  sentry_dsn: env.SENTRY_DSN,\n  new_relic: env.NEW_RELIC,\n\n  /** Mocks **/\n  mockAuthentication: isTesting,\n\n  /** Passport **/\n  clientID: env.FB_CLIENT_ID,\n  clientSecret: env.FB_CLIENT_SECRET,\n  callbackURL: env.FB_CALLBACK_URL,\n\n  /**************************************************************\n   *** Sequelize uses this db object to configure migrations. ***\n   **************************************************************/\n  db: {\n    use_env_variable: 'DATABASE_URL',\n    dialect: 'postgres',\n    timezone: '+00:00',\n    logging: !isTesting && console.info,\n  },\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/config/index.js\n// module id = 3\n// module chunks = 0","module.exports = require(\"ramda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 6\n// module chunks = 0","import * as Chalk from 'chalk'\n\nimport * as U from './date'\n\ntype TLocation = 'server' | 'frontend'\ntype TColor = 'red' | 'blue' | 'white' | 'yellow'\n\ninterface IOptions {\n  name: TLocation\n  silent?: boolean\n}\n\ninterface ILogObject {\n  date: Date\n  log: string\n  formattedDate: string\n  name: TLocation\n  silent: boolean\n}\n\nclass Hermes {\n  name: TLocation\n  silent: boolean\n\n  constructor(options: IOptions) {\n    const {name, silent} = options\n    this.name = name\n    this.silent = silent || false\n  }\n\n  private formatName() {\n    if (this.name === 'server') {\n      return Chalk.bgBlue.white(` ${this.name} `)\n    }\n    if (this.name === 'frontend') {\n      return Chalk.bgYellow.black(` ${this.name} `)\n    }\n    throw Error(`Name must be one of \"server\" or \"frontend\"`)\n  }\n\n  private formatDate(date: Date) {\n    return Chalk.bgBlack(` ${U.formatDate(date)} `)\n  }\n\n  private log(s: string, color: TColor = 'white'): ILogObject {\n    const date = new Date()\n\n    const log =\n      `${this.name === 'server' ? this.formatDate(date) : ''}` +\n      `${this.name === 'server' ? this.formatName() : ''}` +\n      `${this.name === 'server' ? ' ' : ''}` + // Add space if metadata included\n      Chalk[color](s)\n\n    if (!this.silent) {\n      if (this.name === 'server') {\n        console.log(log)\n      } else {\n        console.log('%c' + log, 'background:' + color) // Handle colors differently for frontend\n      }\n    }\n\n    return {\n      date,\n      log,\n      formattedDate: this.formatDate(date),\n      name: this.name,\n      silent: this.silent,\n    }\n  }\n\n  debug(s: string) {\n    return this.log(`INFO: ${s}`, 'blue')\n  }\n\n  info(s: string) {\n    return this.log(`INFO: ${s}`, 'white')\n  }\n\n  warn(s: string) {\n    return this.log(`WARNING: ${s}`, 'yellow')\n  }\n\n  error(s: string) {\n    return this.log(`ERROR: ${s}`, 'red')\n  }\n\n  print(s: string) {\n    return console.log(s)\n  }\n}\n\nexport default Hermes\n\n\n\n// WEBPACK FOOTER //\n// ./utils/hermes.ts","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 8\n// module chunks = 0","import * as Sequelize from 'sequelize'\n\nimport {models} from '~/server/db'\nimport {UserInstance} from '~/server/db/models/user'\nimport {MockUserService} from './user.mock'\n\nconst sequelizeFailure = (reject: Function) => (\n  error: Sequelize.ValidationError\n) => {\n  reject(error.errors[0]) // Return only the descriptive .errors array\n}\n\nexport class UserService extends MockUserService {\n  findByFacebookId(facebookId: string) {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      return models.User\n        .findOne({where: {facebookId}})\n        .then((user: UserInstance) => resolve(user)) // TODO: should reject when user is null\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  find(id: number) {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      return models.User\n        .findById(id)\n        .then((user: UserInstance) => resolve(user))\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  signIn(facebookId: string) {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      return models.User\n        .findOrCreate({where: {facebookId}})\n        .then(([user, _isNew]: [UserInstance, boolean]) => resolve(user))\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  create(attributes: {facebookId: string}) {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      return models.User\n        .create(attributes)\n        .then((user: UserInstance) => resolve(user))\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  all() {\n    return new Promise<\n      Array<UserInstance>\n    >((resolve: Function, reject: Function) => {\n      return models.User\n        .findAll()\n        .then((users: Array<UserInstance>) => resolve(users))\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  setUsername(facebookId: string, username: string) {\n    type IErrorType =\n      | 'blank violation'\n      | 'whitespace violation'\n      | 'format violation'\n      | 'user existence violation'\n      | 'unique violation'\n    type IReject = (e: {type: IErrorType}) => void\n\n    return new Promise<UserInstance>((resolve: Function, reject: IReject) => {\n      if (username === '') {\n        return reject({type: 'blank violation'})\n      }\n      const containsSpaces = /\\s/g.test(username)\n      if (containsSpaces) {\n        return reject({type: 'whitespace violation'})\n      }\n      const validFormat = /^[a-zA-Z0-9-_]+$/.test(username)\n      if (!validFormat) {\n        return reject({type: 'format violation'})\n      }\n      return models.User\n        .findOne({where: {facebookId}})\n        .then((user: UserInstance) => {\n          if (!user) {\n            return reject({type: 'user existence violation'})\n          }\n          return user\n            .update({username})\n            .then(u => resolve(u))\n            .catch(sequelizeFailure(reject))\n        })\n        .catch(sequelizeFailure(reject))\n    })\n  }\n}\n\nexport const userService = new UserService()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/user.ts","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 12\n// module chunks = 0","var startOfWeek = require('../start_of_week/index.js')\n\n/**\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param {Date|String|Number} date - the original date\n * @returns {Date} the start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * var result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nfunction startOfISOWeek (dirtyDate) {\n  return startOfWeek(dirtyDate, {weekStartsOn: 1})\n}\n\nmodule.exports = startOfISOWeek\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/start_of_iso_week/index.js\n// module id = 13\n// module chunks = 0","const R = require('ramda')\nconst path = require('path')\nconst chalk = require('chalk')\nconst dotenv = require('dotenv')\nconst envFile = '.env'\n\nconst HEROKU_ENVS = ['heroku-develop', 'heroku-stage', 'heroku-live', 'heroku-tests']\nconst LOCAL_ENVS = ['test', 'local-develop']\nconst TEST_ENVS = ['test', 'ci', 'heroku-tests']\nconst ALL_ENVS = R.pipe(\n  R.concat(HEROKU_ENVS),\n  R.concat(LOCAL_ENVS),\n  R.concat(TEST_ENVS),\n  R.uniq\n)([])\n\nconst getEnvVariables = () => {\n  const fromDotenv = dotenv.config({path: path.resolve(envFile)})\n\n  if (fromDotenv.error) {\n    console.warn(\n      chalk.yellow(`No config file was found at ${fromDotenv.error.path}`)\n    )\n    return process.env\n  }\n\n  const result = R.merge(fromDotenv.parsed, {\n    NODE_ENV: process.env.NODE_ENV, // Override\n  })\n\n  const testEnv = R.contains(result.NODE_ENV, TEST_ENVS)\n  const mismatchNODE_ENV = fromDotenv.parsed.NODE_ENV !== process.env.NODE_ENV\n  if (mismatchNODE_ENV && !testEnv) {\n    console.info(\n      chalk.yellow(\n        `WARNING: ${envFile} specifies NODE_ENV=${fromDotenv.parsed.NODE_ENV}, ` +\n          `but it be overriden by NODE_ENV=${process.env.NODE_ENV}`\n      )\n    )\n  }\n\n  const supportedEnv = R.contains(result.NODE_ENV, ALL_ENVS)\n  if (!supportedEnv) {\n    console.error(\n      chalk.red(`NODE_ENV \"${result.NODE_ENV}\" is not supported. \\n`) +\n        chalk.grey(`Please provide one of: ${JSON.stringify(ALL_ENVS)}`)\n    )\n    throw Error('Invalid environment')\n  }\n  if (!testEnv) {\n    console.info(chalk.green('Environment variables loaded from .env:'))\n    console.info(chalk.grey(JSON.stringify(result, null, 2)))\n  }\n\n  return result\n}\n\nmodule.exports = {\n  HEROKU_ENVS,\n  LOCAL_ENVS,\n  TEST_ENVS,\n  getEnvVariables,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/config/environments.ts","const {resolver} = require('graphql-sequelize')\n\nimport {models} from '~/server/db'\n\nexport default (post?: {id: number}) => {\n  if (!post) {\n    return resolver(models.Iteration)\n  }\n  return models.Iteration.findAll({where: {postId: post.id}})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/resolvers/iterations.ts","const {resolver} = require('graphql-sequelize')\n\nimport {models} from '~/server/db'\n\nexport default (user?: {id: number}) => {\n  if (!user) {\n    return resolver(models.Post)\n  }\n  return models.Post.findAll({where: {userId: user.id}})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/resolvers/posts.ts","import * as G from 'graphql'\nconst {attributeFields} = require('graphql-sequelize')\n\nimport {models} from '~/server/db'\nimport iterationResolver from '~/server/graphql/resolvers/iterations'\n\nexport const Type = new G.GraphQLObjectType({\n  name: 'Iteration',\n  description: 'A iteration',\n  fields: attributeFields(models.Iteration),\n})\n\nexport const Schema = {\n  type: new G.GraphQLList(Type),\n  resolve: iterationResolver(),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/iterations.ts","import * as G from 'graphql'\nconst {attributeFields} = require('graphql-sequelize')\n\nimport * as Iteration from '~/server/graphql/schema/iterations'\nimport {models} from '~/server/db'\nimport userResolver from '~/server/graphql/resolvers/user'\nimport iterationsResolver from '~/server/graphql/resolvers/iterations'\nimport postsResolver from '~/server/graphql/resolvers/posts'\n\nexport const Type: G.GraphQLObjectType = new G.GraphQLObjectType({\n  name: 'Post',\n  description: 'A post',\n  fields: () => {\n    /**\n     * User must be required in the callback to handle the circular dependency.\n     * More: stackoverflow.com/questions/42531322/graphql-circular-dependency\n     **/\n    const User = require('~/server/graphql/schema/users')\n    return {\n      ...attributeFields(models.Post),\n      user: {\n        type: User.Type,\n        resolve: userResolver,\n      },\n      iterations: {\n        type: new G.GraphQLList(Iteration.Type),\n        resolve: iterationsResolver,\n      },\n    }\n  },\n})\n\nexport const Schema = {\n  type: new G.GraphQLList(Type),\n  args: {\n    id: {type: G.GraphQLID},\n    facebookId: {type: G.GraphQLString},\n  },\n  resolve: postsResolver(),\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/schema/posts.ts","import * as G from 'graphql'\nconst {attributeFields} = require('graphql-sequelize')\nimport postsResolver from '~/server/graphql/resolvers/posts'\n\nimport {models} from '~/server/db'\nimport * as Post from '~/server/graphql/schema/posts'\nimport usersResolver from '~/server/graphql/resolvers/users'\n\nconst userResolver = usersResolver\n\nexport const Type = new G.GraphQLObjectType({\n  name: 'User',\n  description: 'A user',\n  fields: {\n    ...attributeFields(models.User),\n    posts: {\n      type: new G.GraphQLList(Post.Type),\n      resolve: postsResolver,\n    },\n  },\n})\n\nexport const Schema = {\n  type: new G.GraphQLList(Type),\n  args: {\n    id: {type: G.GraphQLID},\n    username: {type: G.GraphQLString},\n  },\n  resolve: userResolver,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/schema/users.ts","import * as express from 'express'\n\ninterface IError {\n  message: string\n}\n\nexport const jsonError = (res: express.Response) => (error: IError) => {\n  res.status(500).json(error)\n}\n\nexport const jsonSuccess = (res: express.Response) => (json: any) => {\n  res.status(200).json(json)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/api/index.ts","import * as U from '../../utils/models'\n\nexport const Enum = U.strEnum(['development', 'production'])\n\nexport type Type = keyof typeof Enum\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/models/Environment.ts","var parse = require('../parse/index.js')\nvar startOfISOWeek = require('../start_of_iso_week/index.js')\n\n/**\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param {Date|String|Number} date - the given date\n * @returns {Number} the ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * var result = getISOYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nfunction getISOYear (dirtyDate) {\n  var date = parse(dirtyDate)\n  var year = date.getFullYear()\n\n  var fourthOfJanuaryOfNextYear = new Date(0)\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4)\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0)\n  var startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear)\n\n  var fourthOfJanuaryOfThisYear = new Date(0)\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4)\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0)\n  var startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear)\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year\n  } else {\n    return year - 1\n  }\n}\n\nmodule.exports = getISOYear\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/get_iso_year/index.js\n// module id = 22\n// module chunks = 0","/**\n * @category Common Helpers\n * @summary Is the given argument an instance of Date?\n *\n * @description\n * Is the given argument an instance of Date?\n *\n * @param {*} argument - the argument to check\n * @returns {Boolean} the given argument is an instance of Date\n *\n * @example\n * // Is 'mayonnaise' a Date?\n * var result = isDate('mayonnaise')\n * //=> false\n */\nfunction isDate (argument) {\n  return argument instanceof Date\n}\n\nmodule.exports = isDate\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/is_date/index.js\n// module id = 23\n// module chunks = 0","module.exports = require(\"awesome-typescript-loader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"awesome-typescript-loader\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 25\n// module chunks = 0","/**\n * Further details on Sentry setup for Express/Node:\n *   - docs.sentry.io/clients/node/integrations/express/\n *   - docs.sentry.io/clients/node/config/\n */\n\nimport * as express from 'express'\nconst Raven = require('raven')\n\ninterface ISentryConfig {\n  sentry_dsn: string\n  env: string\n}\n\nexport const monitorExceptions = (config: ISentryConfig) => (\n  app: express.Application\n) => {\n  // Must configure Raven before doing anything else with it\n  Raven.config(config.sentry_dsn, {environment: config.env}).install()\n\n  // The request handler must be the first middleware on the app\n  app.use(Raven.requestHandler())\n\n  // The error handler must be before any other error middleware\n  app.use(Raven.errorHandler())\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/exceptionMonitoring.ts","import * as express from 'express'\nimport * as passport from 'passport'\n\nimport {IPassportConfig, setupStrategy} from '~/server/service/authentication'\nimport * as Facebook from '~/server/http/authentication/facebook'\nimport * as Mock from '~/server/http/authentication/mock'\nconst {mockAuthentication} = require('~/server/config/index.js')\nimport {userService} from '~/server/service/user'\n\nexport const setup = (config: IPassportConfig) => (app: express.Application) => {\n  setupStrategy(config)\n\n  app.use(passport.initialize())\n  app.use(passport.session())\n\n  if (mockAuthentication) {\n    Mock.setup(app)\n  } else {\n    Facebook.setup(app)\n  }\n\n  app.get('/api/profile', isLoggedIn, async (req, res) => {\n    const user = await userService.findByFacebookId(req.user.id)\n    res.json({profile: req.user, user})\n  })\n\n  app.get('/api/signout', isLoggedIn, (req, res) => {\n    req.logout()\n    res.redirect('/')\n  })\n}\n\n/**\n * Route middleware to make sure a user is logged in\n **/\nconst isLoggedIn = (req: express.Request, res: express.Response, next: Function) => {\n  if (req.isAuthenticated()) {\n    return next()\n  }\n  res.status(403).json({message: 'Please sign in.'})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/authentication/index.ts","import * as express from 'express'\n\nimport PostsRouter from '~/server/http/posts'\nimport UsersRouter from '~/server/http/users'\nimport GraphqlAPI from '~/server/http/graphql'\n\nexport default (app: express.Application) => {\n  GraphqlAPI(app)\n  app.use('/api/posts', PostsRouter)\n  app.use('/api/users', UsersRouter)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/index.tsx","import * as express from 'express'\nimport * as Chalk from 'chalk'\n\nimport Hermes from '../../utils/hermes'\nconst logger = new Hermes({name: 'server'})\n\nexport const listen = (\n  app: express.Application,\n  {host, port}: {host: string; port: number}\n) => {\n  logger.print(Chalk.black.bgGreen(`\\n\\n  Listening at http://${host}:${port}  \\n`))\n  app.listen(port)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/listen.ts","import * as express from 'express'\n\nexport const runHotMiddleware = (app: express.Application) => {\n  const webpack = require('webpack')\n  const webpackConfig = require('../../webpack/frontend/development').default\n  const webpackCompiler = webpack(webpackConfig)\n\n  app.use(\n    require('webpack-dev-middleware')(webpackCompiler, {\n      publicPath: webpackConfig.output.publicPath,\n      stats: {colors: true},\n      noInfo: true,\n      hot: true,\n      inline: true,\n      lazy: false,\n      historyApiFallback: true,\n      quiet: true,\n    })\n  )\n\n  app.use(require('webpack-hot-middleware')(webpackCompiler))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/middleware.ts","import * as express from 'express'\n\ndeclare var __OUTPUT_DIR__: boolean // Defined by webpack.DefinePlugin at compile time\n\nexport const serveFrontend = (app: express.Application) => {\n  const fs = require('fs')\n  const path = require('path')\n\n  app.use('/', express.static(__dirname))\n\n  app.get('*', (_: express.Request, res: express.Response) => {\n    const file = path.join(__OUTPUT_DIR__, 'index.html') // TODO: Replace with raw-loader require\n    const html = fs.readFileSync(file).toString()\n    res.status(200).send(html)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/serveFrontend.tsx","import * as express from 'express'\nimport * as session from 'express-session'\n\nexport const setupSession = (app: express.Application) => {\n  /** More info: github.com/expressjs/session#options */\n  const options: session.SessionOptions = {\n    secret: 'ssshhhhh', // TODO: get secret from env\n    resave: false,\n    saveUninitialized: true,\n  }\n\n  app.use(session(options))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/session.ts","import * as bodyParser from 'body-parser'\nimport * as express from 'express'\n\ntype IIntializer = (a: express.Application) => void\n\nexport const newApp = (initalizers: IIntializer[]) => {\n  const app = express()\n  app.use(bodyParser.json())\n  initalizers.map(i => i(app))\n  return app\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/http/newApp.ts","module.exports = require(\"helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"helmet\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"newrelic\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"newrelic\"\n// module id = 35\n// module chunks = 0","import {IDatabaseConfig} from './interface'\n\nconst config: IDatabaseConfig = require('./index.js')\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/db/config/index.ts","import * as SequelizeStatic from 'sequelize'\nimport {Instance, Sequelize} from 'sequelize'\nimport {IPostModel} from './post'\n\nexport interface IterationAttributes {\n  postId: number\n  body?: string\n  title: string\n}\n\nexport interface IterationSchema extends IterationAttributes {\n  createdAt: string\n}\n\nexport interface IterationInstance extends Instance<IterationAttributes> {\n  dataValues: IterationAttributes\n}\n\nexport type IIterationModel = SequelizeStatic.Model<\n  IterationInstance,\n  IterationAttributes\n>\n\nexport default (sequelize: Sequelize): IIterationModel => {\n  const Schema = {\n    id: {\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true,\n      type: SequelizeStatic.INTEGER,\n    },\n    createdAt: {\n      allowNull: false,\n      type: SequelizeStatic.DATE,\n    },\n    postId: {\n      type: SequelizeStatic.INTEGER,\n      allowNull: false,\n    },\n    title: {\n      type: SequelizeStatic.STRING,\n      allowNull: false,\n      len: 1,\n    },\n    body: {\n      len: 1,\n      allowNull: false,\n      type: SequelizeStatic.TEXT,\n    },\n  }\n  const Iteration = sequelize.define<\n    IterationInstance,\n    IterationAttributes\n  >('Iteration', Schema, {\n    classMethods: {\n      associate: (models: {Post: IPostModel}) => Iteration.belongsTo(models.Post),\n    },\n  })\n  return Iteration\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/db/models/iteration.ts","import * as SequelizeStatic from 'sequelize'\nimport {Instance, Sequelize} from 'sequelize'\nimport {IUserModel} from './user'\n\nexport interface PostAttributes {\n  userId: number\n  createdAt?: Date\n  slug?: string\n  // NOTE: updatedAt is not part of the Post interface\n}\n\nexport interface PostSchema extends PostAttributes {\n  id: number\n}\n\nexport interface PostInstance extends Instance<PostAttributes> {\n  dataValues: PostAttributes\n}\n\nexport type IPostModel = SequelizeStatic.Model<PostInstance, PostAttributes>\n\nexport default (sequelize: Sequelize): IPostModel => {\n  const Schema = {\n    id: {\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true,\n      type: SequelizeStatic.INTEGER,\n    },\n    userId: {\n      allowNull: false,\n      type: SequelizeStatic.INTEGER,\n    },\n    slug: {\n      allowNull: false,\n      defaultValue: SequelizeStatic.UUIDV4,\n      type: SequelizeStatic.STRING,\n      unique: true,\n    },\n    createdAt: {\n      allowNull: false,\n      type: SequelizeStatic.DATE,\n    },\n  }\n  const Post = sequelize.define<PostInstance, PostAttributes>('Post', Schema, {\n    classMethods: {\n      associate: (models: {User: IUserModel}) => Post.belongsTo(models.User),\n    },\n  })\n  return Post\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/db/models/post.ts","import * as SequelizeStatic from 'sequelize'\nimport {Instance, Sequelize} from 'sequelize'\nimport {IPerson} from './person'\n\nexport interface UserAttributes extends IPerson {\n  facebookId: string\n  username?: string\n}\n\nexport interface UserInstance extends Instance<UserAttributes> {\n  dataValues: UserAttributes\n}\n\nexport type IUserModel = SequelizeStatic.Model<UserInstance, UserAttributes>\n\nexport default (sequelize: Sequelize): IUserModel => {\n  const Schema = {\n    id: {\n      allowNull: false,\n      autoIncrement: true,\n      primaryKey: true,\n      type: SequelizeStatic.INTEGER,\n    },\n    facebookId: {\n      allowNull: false,\n      unique: true,\n      type: SequelizeStatic.STRING,\n    },\n    username: {\n      allowNull: true,\n      unique: true,\n      type: SequelizeStatic.STRING,\n    },\n    createdAt: {\n      allowNull: false,\n      type: SequelizeStatic.DATE,\n    },\n  }\n  return sequelize.define<UserInstance, UserAttributes>('User', Schema, {})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/db/models/user.ts","import {models} from '~/server/db'\n\nexport default (post: {userId: number}) =>\n  models.User.findOne({where: {id: post.userId}})\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/resolvers/user.ts","const {resolver} = require('graphql-sequelize')\n\nimport {models} from '~/server/db'\n\nexport default resolver(models.User)\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/resolvers/users.ts","import * as G from 'graphql'\n\nimport * as User from '~/server/graphql/schema/users'\nimport * as Post from '~/server/graphql/schema/posts'\nimport * as Iteration from '~/server/graphql/schema/iterations'\n\nconst graphqlSchema = new G.GraphQLSchema({\n  query: new G.GraphQLObjectType({\n    name: 'RootQueryType',\n    fields: {\n      users: User.Schema,\n      posts: Post.Schema,\n      iterations: Iteration.Schema,\n    },\n  }),\n})\n\nexport default graphqlSchema\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/graphql/schema/index.ts","import * as express from 'express'\nimport * as passport from 'passport'\n\nimport Hermes from '~/../utils/hermes'\nconst logger = new Hermes({name: 'server'})\n\nexport const setup = (app: express.Application) => {\n  /**\n   * Redirect the user to Facebook for authentication.  When complete,\n   * Facebook will redirect the user back to the application at\n   *     /auth/facebook/callback\n   **/\n  app.get('/auth/facebook', passport.authenticate('facebook'))\n\n  /**\n   * Facebook will redirect the user to this URL after approval. Finish\n   * the authentication process by attempting to obtain an access token.\n   * If access was granted, the user will be logged in. Otherwise,\n   * authentication has failed.\n   **/\n  app.get(\n    '/auth/facebook/callback',\n    passport.authenticate('facebook', {\n      successRedirect: '/signin',\n      failureRedirect: '/auth/facebook/failure',\n    })\n  )\n\n  app.get('/auth/facebook/failure', (_, res) => {\n    logger.info('Facebook OAuth failure')\n    res.redirect('/posts')\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/authentication/facebook.ts","import * as express from 'express'\nimport * as passport from 'passport'\n\nexport const setup = (app: express.Application) => {\n  app.get('/auth/facebook', passport.authenticate('test'), (_, res) => {\n    res.redirect('/signin')\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/authentication/mock.ts","import * as express from 'express'\nimport * as graphqlHTTP from 'express-graphql'\n\nimport graphqlSchema from '~/server/graphql/schema'\n\nexport default (app: express.Application) => {\n  app.use('/graphql', graphqlHTTP({schema: graphqlSchema, graphiql: true}))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/graphql.ts","import * as express from 'express'\n\nimport {jsonError} from '~/../utils/api/requests'\n\nimport {userService} from '~/server/service/user'\nimport {postService} from '~/server/service/post'\n\nconst router = express.Router()\n\nrouter.get('/', async (_: express.Request, res: express.Response) => {\n  try {\n    const posts = await postService.all()\n    res.status(200).json(posts)\n  } catch (e) {\n    jsonError(res)(e)\n  }\n})\n\nrouter.get(\n  '/users/:facebookId',\n  async (req: express.Request, res: express.Response) => {\n    try {\n      const user = await userService.findByFacebookId(req.params.facebookId)\n      const posts = await postService.ownedBy(user)\n      res.status(200).json(posts)\n    } catch (e) {\n      jsonError(res)(e)\n    }\n  }\n)\n\nrouter.post('/create', async (req: express.Request, res: express.Response) => {\n  try {\n    const user = await userService.findByFacebookId(req.body.facebookId)\n    const post = await postService.create(user, {\n      title: req.body.title,\n      body: req.body.body,\n    })\n    res.status(200).json(post)\n  } catch (e) {\n    jsonError(res)(e)\n  }\n})\n\nrouter.get('/:id', async (req: express.Request, res: express.Response) => {\n  try {\n    const iterations = await postService.iterations(req.params.id)\n    res.status(200).json(iterations)\n  } catch (e) {\n    jsonError(res)(e)\n  }\n})\n\nrouter.post('/:id/iterate', async (req: express.Request, res: express.Response) => {\n  try {\n    const postId = Number(req.params.id)\n    const iteration = await postService.iterate(postId, req.body)\n    res.status(200).json(iteration)\n  } catch (e) {\n    jsonError(res)(e)\n  }\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/posts.ts","import * as express from 'express'\n\nimport {jsonError} from '~/../utils/api/requests'\nimport {userService} from '~/server/service/user'\n\nconst router = express.Router()\n\nconst getMessage = {\n  setUsername: (type: string) => {\n    switch (type) {\n      case 'unique violation':\n        return 'Sorry, that username is not available.'\n      case 'blank violation':\n        return 'Your username cannot be empty.'\n      case 'whitespace violation':\n        return 'Please choose a username that does not contain spaces.'\n      case 'format violation':\n        return (\n          'Please choose a username that only contains letters, numbers, ' +\n          'dashes, and underscores.'\n        )\n      case 'user existence violation':\n        return 'Oops! Something went wrong. Please try again.'\n      default:\n        throw Error(`Unexpected error of type \"${type}\"`)\n    }\n  },\n}\n\nrouter.post('/setUsername', async (req: express.Request, res: express.Response) => {\n  try {\n    const [username, facebookId] = [req.body.username, req.body.facebookId]\n    const user = await userService.setUsername(facebookId, username)\n    res.status(200).json(user.dataValues.username)\n  } catch (e) {\n    jsonError(res)({message: getMessage.setUsername(e.type)})\n  }\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/http/users.ts","require('newrelic')\n\nimport * as R from 'ramda'\nimport * as Chalk from 'chalk'\n\nimport Hermes from '~/../utils/hermes'\nimport {newApp} from '~/../utils/http/newApp'\n\nimport http from './http'\nimport * as Passport from './http/authentication'\nimport {runHotMiddleware} from './middleware'\nimport {listen} from './listen'\nimport {monitorExceptions} from './exceptionMonitoring'\nimport {serveFrontend} from './serveFrontend'\nimport {sequelize} from './db'\nimport {setupSession} from './session'\n\nconst {LOCAL_ENVS} = require('./config/environments')\nconst config = require('./config/index.js')\nconst logger = new Hermes({name: 'server'})\n\nconst app = newApp([\n  a => a.use(require('helmet')()),\n  monitorExceptions(config),\n  setupSession, // Must happen before initializing the API\n  http,\n  Passport.setup(config),\n])\n\nif (R.contains(config.env, LOCAL_ENVS)) {\n  logger.print(Chalk.bgBlue.black(`\\n\\n  Running HMR...  \\n`))\n  runHotMiddleware(app)\n}\n\nserveFrontend(app)\n\nsequelize.sync().then(() => listen(app, config))\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/main.tsx","import * as passport from 'passport'\nimport * as Facebook from 'passport-facebook'\n\nimport {userService} from '~/server/service/user'\nimport {UserInstance} from '~/server/db/models/user'\nconst Mock = require('~/server/service/authentication/mock')\nconst {mockAuthentication} = require('~/server/config/index.js')\n\nexport interface IPassportConfig {\n  clientID: string\n  clientSecret: string\n  callbackURL: string\n}\n\nconst signInCallback = (\n  profile: Facebook.Profile,\n  done: (_e: any, user?: Facebook.Profile) => void\n) => {\n  const facebookId = profile.id\n  userService\n    .signIn(facebookId)\n    .then((_u: UserInstance) => done(null, profile))\n    .catch((e: any) => done(JSON.stringify(e)))\n}\n\nconst setupFacebookStrategy = (options: IPassportConfig) => {\n  const fbStrategy = new Facebook.Strategy(options, (_t, _rt, profile, done) => {\n    signInCallback(profile, done)\n  })\n  passport.use(fbStrategy)\n}\n\nconst setupMockStrategy = (options: IPassportConfig) => {\n  const mockStrategy = new Mock.Strategy(options, signInCallback)\n  passport.use(mockStrategy)\n}\n\nexport const setupStrategy = (options: IPassportConfig) => {\n  if (mockAuthentication) {\n    setupMockStrategy(options)\n  } else {\n    setupFacebookStrategy(options)\n  }\n\n  /**\n   * Determines which data of the user object should be stored in the session.\n   * The result of the serializeUser method is attached to the session as\n   * req.session.passport.user.\n   **/\n  passport.serializeUser((user, done) => {\n    done(null, user)\n  })\n\n  /**\n   * The first argument of deserializeUser corresponds to the key of the user\n   * object that was given to the done function. So your whole object is\n   * retrieved with help of that key. That key here is the user id (key can\n   * be any key of the user object i.e. name, email etc). In deserializeUser\n   * that key is matched with the in memory array / database or any data resource.\n   **/\n  passport.deserializeUser((user, done) => {\n    done(null, user)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/authentication/index.ts","import * as util from 'util'\nconst passport = require('passport')\nimport * as Facebook from 'passport-facebook'\n\nimport profileMock from '~/server/service/authentication/profile.mock'\n\nexport const Strategy = function Strategy(\n  this: any,\n  _options: Object,\n  verify: Function\n) {\n  this.name = 'test'\n  this.verify = verify\n}\n\nutil.inherits(Strategy, passport.Strategy)\n\nStrategy.prototype.authenticate = function(this: any, _: any) {\n  this.verify(profileMock(), (err: any, profile: Facebook.Profile, info: any) => {\n    if (err) {\n      return this.error(err)\n    }\n    if (!profile) {\n      return this.fail(info)\n    }\n    this.success(profile, info)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/authentication/mock.ts","import * as Facebook from 'passport-facebook'\nimport {randomStr} from '~/../utils/test/string'\n\nconst profileMock = (): Facebook.Profile => {\n  const id = randomStr()\n  const displayName = 'Mock User'\n\n  return {\n    id,\n    displayName,\n    provider: 'facebook',\n    _raw: `{\"name\":\"${displayName}\",\"id\":\"${id}\"}`,\n    _json: {name: displayName, id},\n  }\n}\n\nexport default profileMock\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/authentication/profile.mock.ts","import {PostInstance} from '~/server/db/models/post'\nimport {UserInstance} from '~/server/db/models/user'\nimport {IterationInstance} from '~/server/db/models/iteration'\n\nexport class MockPostService {\n  public mockPost = {\n    postId: 9,\n    title: 'Foo Bar Baz',\n  }\n\n  create(user: UserInstance, _iteration: {body?: string; title: string}) {\n    return new Promise<PostInstance>((resolve, _) => {\n      const mock = {dataValues: {userId: user.get('id')}}\n      resolve(<PostInstance>mock)\n    })\n  }\n\n  all() {\n    return new Promise<PostInstance[]>((resolve, _) => {\n      const baz = [\n        {dataValues: {userId: 1}},\n        {dataValues: {userId: 2}},\n        {dataValues: {userId: 2}},\n      ]\n      resolve(<PostInstance[]>baz)\n    })\n  }\n\n  ownedBy(user: UserInstance) {\n    return new Promise<PostInstance[]>((resolve, _) => {\n      const baz = [\n        {dataValues: {userId: user.get('id')}},\n        {dataValues: {userId: user.get('id')}},\n        {dataValues: {userId: user.get('id')}},\n      ]\n      resolve(<PostInstance[]>baz)\n    })\n  }\n\n  iterations(postId: number) {\n    return new Promise<IterationInstance[]>((resolve, reject) => {\n      if (postId % 2) {\n        const mock = [\n          {dataValues: {postId, title: 'Post 1, with no body'}},\n          {\n            dataValues: {\n              postId,\n              title: 'Post 2, with body',\n              body: 'Body of post 2',\n            },\n          },\n        ]\n        resolve(<IterationInstance[]>mock)\n      } else {\n        reject({message: `Cannot find post with id ${postId}`})\n      }\n    })\n  }\n\n  iterate(postId: number, data: {body?: string; title: string}) {\n    return new Promise<IterationInstance>(async (resolve, _) => {\n      const mock = {dataValues: {...this.mockPost, ...data, postId}}\n      resolve(<IterationInstance>mock)\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/post.mock.ts","import * as Sequelize from 'sequelize'\nimport * as R from 'ramda'\n\nimport {models, sequelize} from '~/server/db'\nimport {PostInstance} from '~/server/db/models/post'\nimport {MockPostService} from './post.mock'\nimport {UserInstance} from '~/server/db/models/user'\nimport {IterationInstance} from '~/server/db/models/iteration'\nimport Hermes from '~/../utils/hermes'\n\nconst logger = new Hermes({name: 'server'})\n\nconst sequelizeFailure = (reject: Function) => (\n  error: Sequelize.ValidationError\n) => {\n  logger.warn(error.toString()) // Log full error\n  reject(error.toString()) // Return only the descriptive .errors array\n}\n\ntype IIteration = {body?: string; title: string}\n\nconst validateIteration = (\n  iteration: IIteration,\n  reject: Function,\n  cb: Function\n) => {\n  if (R.isEmpty(iteration.title)) {\n    return reject('Please provide a title.')\n  }\n  if (R.isEmpty(iteration.body)) {\n    return reject('Please write something.')\n  }\n  cb()\n}\n\nconst initPost = (\n  resolve: Function,\n  reject: Function,\n  userId: number,\n  iteration: IIteration,\n  slug?: string\n) => (t: Sequelize.Transaction) => {\n  return models.Post\n    .create({userId, slug}, {transaction: t})\n    .then(async post => {\n      await models.Iteration.create({...iteration, postId: post.get('id')})\n      resolve(post)\n    })\n    .catch((reason: {errors: {message: string}[]}) => {\n      const errorMap: {[v: string]: string} = {\n        'slug must be unique': 'Sorry, that slug is taken!',\n      }\n      const m = reason.errors && reason.errors[0].message\n      reject(errorMap[m] || 'Something went wrong.')\n    })\n}\n\nexport class PostService extends MockPostService {\n  create(user: UserInstance, iteration: IIteration, slug?: string) {\n    return new Promise<PostInstance>((resolve: Function, reject: Function) => {\n      if (!user || !user.get('id')) {\n        return reject('Please provide a user.')\n      }\n      validateIteration(iteration, reject, () => {\n        return sequelize\n          .transaction(initPost(resolve, reject, user.get('id'), iteration, slug))\n          .then((post: PostInstance) => resolve(post))\n          .catch((err: Error) => reject(err))\n      })\n    })\n  }\n\n  all() {\n    return new Promise<PostInstance[]>((resolve: Function, reject: Function) => {\n      return models.Post\n        .findAll()\n        .then((posts: PostInstance[]) => resolve(posts))\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  ownedBy(user: UserInstance) {\n    return new Promise<PostInstance[]>((resolve: Function, reject: Function) => {\n      return models.Post\n        .findAll({where: {userId: user.get('id')}})\n        .then((posts: PostInstance[]) => resolve(posts))\n        .catch(sequelizeFailure(reject))\n    })\n  }\n\n  iterations(postId: number) {\n    return new Promise<IterationInstance[]>((resolve, reject) => {\n      return models.Iteration.findAll({where: {postId}}).then(resolve).catch(reject)\n    })\n  }\n\n  iterate(postId: number, data: IIteration) {\n    return new Promise<IterationInstance>((resolve, reject) => {\n      validateIteration(data, reject, () => {\n        return models.Iteration.create({postId, ...data}).then(resolve).catch(reject)\n      })\n    })\n  }\n\n  comments(iterationId: number) {\n    return new Promise<IterationInstance[]>((resolve, _reject) => {\n      iterationId\n      resolve([])\n    })\n  }\n}\n\nexport const postService = new PostService()\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/post.ts","import {UserAttributes, UserInstance} from '~/server/db/models/user'\n\nexport class MockUserService {\n  findByFacebookId(facebookId: string): Promise<UserInstance> {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      if (!facebookId) {\n        reject({message: `Please provide a facebookId`})\n      }\n      if (facebookId == 'thisUsernameDoesntExist') {\n        reject({type: 'user existence violation'})\n      }\n      resolve({\n        dataValues: {facebookId, id: 123},\n        get: (key: string) => {\n          switch (key) {\n            case 'id':\n              return 123\n            default:\n              throw Error(`Value for key \"${key}\" is undefined on mock user`)\n          }\n        },\n      })\n    })\n  }\n\n  find(id: number): Promise<UserInstance> {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      if (isNaN(id)) {\n        reject({message: `User id must be an integer`})\n      }\n      if (id === 2) {\n        reject({message: `User with id \"${2}\" does not exist`})\n      }\n      resolve({\n        dataValues: {facebookId: 'fake-fb-id', id},\n        get: (key: string) => {\n          switch (key) {\n            case 'id':\n              return 123\n            default:\n              throw Error(`Value for key \"${key}\" is undefined on mock user`)\n          }\n        },\n      })\n    })\n  }\n\n  create(attributes: UserAttributes): Promise<UserInstance> {\n    return new Promise<UserInstance>((resolve: Function, reject: Function) => {\n      if (attributes.facebookId == 'thisUsernameIsntAvailable') {\n        reject({message: `Sorry, \"${attributes.facebookId}\" is not available`})\n      }\n      resolve({dataValues: attributes})\n    })\n  }\n\n  all(): Promise<Array<UserInstance>> {\n    return new Promise<Array<UserInstance>>((resolve: Function, _: Function) => {\n      resolve([{facebookId: 'foobar'}])\n    })\n  }\n\n  setUsername(facebookId: string, username: string): Promise<UserInstance> {\n    return new Promise<UserInstance>(async (resolve: Function, reject: Function) => {\n      if (username === '') {\n        reject({type: 'blank violation'})\n      }\n      if (username === 'contains whitespace') {\n        reject({type: 'whitespace violation'})\n      }\n      if (username === 'badFormat!') {\n        reject({type: 'format violation'})\n      }\n      if (username === 'takenUsername') {\n        reject({type: 'unique violation'})\n      }\n      try {\n        const user = await this.findByFacebookId(facebookId)\n        resolve({dataValues: {...user.dataValues, username}})\n      } catch (e) {\n        reject(e)\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/service/user.mock.ts","import * as format from 'date-fns/format'\nimport * as R from 'ramda'\n\nexport const formatDateStr = (s: string) => {\n  const result = new Date(Date.parse(s)).toLocaleTimeString('en-UK', {\n    hour12: false,\n    day: '2-digit',\n    month: 'numeric',\n    year: 'numeric',\n  })\n  if (result === 'Invalid Date') {\n    throw Error(result)\n  }\n  return result\n}\n\nexport const formatDate = R.partialRight(format, ['DD-MM-YYYY HH:mm:ss'])\nexport const formatDateLong = R.partialRight(format, ['DD MMM YYYY, HH:mm'])\n\n\n\n// WEBPACK FOOTER //\n// ./utils/date.ts","export type StrObject = {[key: string]: string}\n\n// Adopted from:\n//   https://basarat.gitbooks.io/typescript/docs/types/literal-types.html\nexport function strEnum<T extends string>(o: Array<T>): {[K in T]: K} {\n  return o.reduce((res, key) => {\n    res[key] = key\n    return res\n  }, Object.create(null))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/models/index.ts","export const randomStr = () => Math.random().toString(36).substr(2, 5)\n\nexport const dasherize = (str: string) => str.replace(/\\s+/g, '-').toLowerCase()\n\n\n\n// WEBPACK FOOTER //\n// ./utils/test/string.ts","import * as Env from '../models/Environment'\nimport {setup} from './'\n\nexport default setup(Env.Enum.development)\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/frontend/development.ts","import * as webpackMerge from 'webpack-merge'\nimport * as webpack from 'webpack'\nimport * as path from 'path'\n\nimport * as Options from '../models/Options'\nimport * as Env from '../models/Environment'\n\nexport const setup = (env: Env.Type) => {\n  const isProd = String(env) === String(Env.Enum.production)\n\n  const options: Options.Interface = {\n    rootDir: path.join(__dirname, '../..'),\n    outputDir: isProd ? 'dist' : 'build',\n    devtool: 'source-map',\n    console: !isProd,\n    isProd,\n  }\n\n  const shared = [\n    require('../loaders/css-loader'),\n    require('./partials/base'),\n    require('../partials/aliases'),\n  ]\n\n  const partials = isProd\n    ? [require('../loaders/typescript-loader'), ...shared]\n    : [require('../loaders/hot-typescript-loader'), ...shared]\n  return webpackMerge(partials.map((m): webpack.Configuration => m.partial(options)))\n}\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/frontend/index.ts","import * as path from 'path'\nimport * as webpack from 'webpack'\n\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\n\nimport * as Options from 'webpack/models/Options'\n\nconst entryFile = './src/frontend/main.tsx'\nexport const partial = (c: Options.Interface): webpack.Configuration => ({\n  entry: c.isProd\n    ? entryFile\n    : {\n        app: ['webpack-hot-middleware/client?reload=true', entryFile],\n      },\n\n  output: {\n    path: path.join(c.rootDir, c.outputDir),\n    filename: 'frontend.js',\n    publicPath: '/', // Prepended to urls injected by HtmlWebpackPlugin\n  },\n\n  devtool: c.devtool,\n\n  plugins: [\n    ...(c.isProd ? [] : [new webpack.HotModuleReplacementPlugin()]),\n    new HtmlWebpackPlugin({template: './src/frontend/index.html'}),\n  ],\n})\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/frontend/partials/base.ts","import * as webpack from 'webpack'\nimport * as Options from 'webpack/models/Options'\n\nconst loaders = (c: Options.Interface): webpack.Loader[] => {\n  const frontendDir = (path: string = '') => `${c.rootDir}/src/frontend/${path}`\n\n  return [\n    {\n      loader: 'style-loader',\n    },\n    {\n      loader: 'css-loader',\n      options: {\n        importLoaders: 2,\n        sourceMap: true,\n        modules: true,\n        localIdentName: '[local]___[hash:base64:5]',\n      },\n    },\n    {\n      loader: 'postcss-loader',\n      options: {\n        plugins: () => [\n          require('postcss-import')({path: [frontendDir()]}),\n          require('postcss-cssnext')(),\n          require('postcss-assets')({relative: frontendDir()}),\n        ],\n      },\n    },\n  ]\n}\n\nexport const partial = (c: Options.Interface): webpack.Configuration => ({\n  module: {\n    rules: [\n      {\n        include: c.rootDir,\n        test: /\\.css?$/,\n        use: loaders(c),\n        exclude: /node_modules/,\n      },\n    ],\n  },\n})\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/loaders/css-loader.ts","import * as webpack from 'webpack'\n\nconst {CheckerPlugin} = require('awesome-typescript-loader')\n\nexport const partial = (): webpack.Configuration => ({\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        loader: require('webpack-combine-loaders')([\n          'react-hot-loader',\n          'awesome-typescript-loader',\n        ]),\n        exclude: /node_modules/,\n      },\n    ],\n  },\n\n  plugins: [new CheckerPlugin()],\n})\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/loaders/hot-typescript-loader.ts","import * as webpack from 'webpack'\n\nconst {CheckerPlugin} = require('awesome-typescript-loader')\n\nexport const partial = (): webpack.Configuration => ({\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        loader: 'awesome-typescript-loader',\n        exclude: /node_modules/,\n      },\n    ],\n  },\n\n  plugins: [new CheckerPlugin()],\n})\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/loaders/typescript-loader.ts","import * as path from 'path'\nimport * as webpack from 'webpack'\n\nimport * as Options from 'webpack/models/Options'\n\nexport const partial = (c: Options.Interface): webpack.Configuration => ({\n  resolve: {\n    modules: ['node_modules', path.join(c.rootDir, 'src')],\n\n    /**\n     * Though the project's source is in Typescript, we must support Javascript\n     * resolution as well, because some node_modules import JS files.\n     */\n    extensions: ['.tsx', '.ts', '.js', '.jsx'],\n\n    alias: {\n      '~': path.resolve('./src'),\n    },\n  },\n})\n\n\n\n// WEBPACK FOOTER //\n// ./webpack/partials/aliases.ts","var startOfDay = require('../start_of_day/index.js')\n\nvar MILLISECONDS_IN_MINUTE = 60000\nvar MILLISECONDS_IN_DAY = 86400000\n\n/**\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates.\n *\n * @param {Date|String|Number} dateLeft - the later date\n * @param {Date|String|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * var result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n */\nfunction differenceInCalendarDays (dirtyDateLeft, dirtyDateRight) {\n  var startOfDayLeft = startOfDay(dirtyDateLeft)\n  var startOfDayRight = startOfDay(dirtyDateRight)\n\n  var timestampLeft = startOfDayLeft.getTime() -\n    startOfDayLeft.getTimezoneOffset() * MILLISECONDS_IN_MINUTE\n  var timestampRight = startOfDayRight.getTime() -\n    startOfDayRight.getTimezoneOffset() * MILLISECONDS_IN_MINUTE\n\n  // Round the number of days to the nearest integer\n  // because the number of milliseconds in a day is not constant\n  // (e.g. it's different in the day of the daylight saving time clock shift)\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY)\n}\n\nmodule.exports = differenceInCalendarDays\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/difference_in_calendar_days/index.js\n// module id = 65\n// module chunks = 0","var getDayOfYear = require('../get_day_of_year/index.js')\nvar getISOWeek = require('../get_iso_week/index.js')\nvar getISOYear = require('../get_iso_year/index.js')\nvar parse = require('../parse/index.js')\nvar isValid = require('../is_valid/index.js')\nvar enLocale = require('../locale/en/index.js')\n\n/**\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format.\n *\n * Accepted tokens:\n * | Unit                    | Token | Result examples                  |\n * |-------------------------|-------|----------------------------------|\n * | Month                   | M     | 1, 2, ..., 12                    |\n * |                         | Mo    | 1st, 2nd, ..., 12th              |\n * |                         | MM    | 01, 02, ..., 12                  |\n * |                         | MMM   | Jan, Feb, ..., Dec               |\n * |                         | MMMM  | January, February, ..., December |\n * | Quarter                 | Q     | 1, 2, 3, 4                       |\n * |                         | Qo    | 1st, 2nd, 3rd, 4th               |\n * | Day of month            | D     | 1, 2, ..., 31                    |\n * |                         | Do    | 1st, 2nd, ..., 31st              |\n * |                         | DD    | 01, 02, ..., 31                  |\n * | Day of year             | DDD   | 1, 2, ..., 366                   |\n * |                         | DDDo  | 1st, 2nd, ..., 366th             |\n * |                         | DDDD  | 001, 002, ..., 366               |\n * | Day of week             | d     | 0, 1, ..., 6                     |\n * |                         | do    | 0th, 1st, ..., 6th               |\n * |                         | dd    | Su, Mo, ..., Sa                  |\n * |                         | ddd   | Sun, Mon, ..., Sat               |\n * |                         | dddd  | Sunday, Monday, ..., Saturday    |\n * | Day of ISO week         | E     | 1, 2, ..., 7                     |\n * | ISO week                | W     | 1, 2, ..., 53                    |\n * |                         | Wo    | 1st, 2nd, ..., 53rd              |\n * |                         | WW    | 01, 02, ..., 53                  |\n * | Year                    | YY    | 00, 01, ..., 99                  |\n * |                         | YYYY  | 1900, 1901, ..., 2099            |\n * | ISO week-numbering year | GG    | 00, 01, ..., 99                  |\n * |                         | GGGG  | 1900, 1901, ..., 2099            |\n * | AM/PM                   | A     | AM, PM                           |\n * |                         | a     | am, pm                           |\n * |                         | aa    | a.m., p.m.                       |\n * | Hour                    | H     | 0, 1, ... 23                     |\n * |                         | HH    | 00, 01, ... 23                   |\n * |                         | h     | 1, 2, ..., 12                    |\n * |                         | hh    | 01, 02, ..., 12                  |\n * | Minute                  | m     | 0, 1, ..., 59                    |\n * |                         | mm    | 00, 01, ..., 59                  |\n * | Second                  | s     | 0, 1, ..., 59                    |\n * |                         | ss    | 00, 01, ..., 59                  |\n * | 1/10 of second          | S     | 0, 1, ..., 9                     |\n * | 1/100 of second         | SS    | 00, 01, ..., 99                  |\n * | Millisecond             | SSS   | 000, 001, ..., 999               |\n * | Timezone                | Z     | -01:00, +00:00, ... +12:00       |\n * |                         | ZZ    | -0100, +0000, ..., +1200         |\n * | Seconds timestamp       | X     | 512969520                        |\n * | Milliseconds timestamp  | x     | 512969520900                     |\n *\n * The characters wrapped in square brackets are escaped.\n *\n * The result may vary by locale.\n *\n * @param {Date|String|Number} date - the original date\n * @param {String} [format='YYYY-MM-DDTHH:mm:ss.SSSZ'] - the string of tokens\n * @param {Object} [options] - the object with options\n * @param {Object} [options.locale=enLocale] - the locale object\n * @returns {String} the formatted date string\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * var result = format(\n *   new Date(2014, 1, 11),\n *   'MM/DD/YYYY'\n * )\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * var eoLocale = require('date-fns/locale/eo')\n * var result = format(\n *   new Date(2014, 6, 2),\n *   'Do [de] MMMM YYYY',\n *   {locale: eoLocale}\n * )\n * //=> '2-a de julio 2014'\n */\nfunction format (dirtyDate, dirtyFormatStr, dirtyOptions) {\n  var formatStr = dirtyFormatStr ? String(dirtyFormatStr) : 'YYYY-MM-DDTHH:mm:ss.SSSZ'\n  var options = dirtyOptions || {}\n\n  var locale = options.locale\n  var localeFormatters = enLocale.format.formatters\n  var formattingTokensRegExp = enLocale.format.formattingTokensRegExp\n  if (locale && locale.format && locale.format.formatters) {\n    localeFormatters = locale.format.formatters\n\n    if (locale.format.formattingTokensRegExp) {\n      formattingTokensRegExp = locale.format.formattingTokensRegExp\n    }\n  }\n\n  var date = parse(dirtyDate)\n\n  if (!isValid(date)) {\n    return 'Invalid Date'\n  }\n\n  var formatFn = buildFormatFn(formatStr, localeFormatters, formattingTokensRegExp)\n\n  return formatFn(date)\n}\n\nvar formatters = {\n  // Month: 1, 2, ..., 12\n  'M': function (date) {\n    return date.getMonth() + 1\n  },\n\n  // Month: 01, 02, ..., 12\n  'MM': function (date) {\n    return addLeadingZeros(date.getMonth() + 1, 2)\n  },\n\n  // Quarter: 1, 2, 3, 4\n  'Q': function (date) {\n    return Math.ceil((date.getMonth() + 1) / 3)\n  },\n\n  // Day of month: 1, 2, ..., 31\n  'D': function (date) {\n    return date.getDate()\n  },\n\n  // Day of month: 01, 02, ..., 31\n  'DD': function (date) {\n    return addLeadingZeros(date.getDate(), 2)\n  },\n\n  // Day of year: 1, 2, ..., 366\n  'DDD': function (date) {\n    return getDayOfYear(date)\n  },\n\n  // Day of year: 001, 002, ..., 366\n  'DDDD': function (date) {\n    return addLeadingZeros(getDayOfYear(date), 3)\n  },\n\n  // Day of week: 0, 1, ..., 6\n  'd': function (date) {\n    return date.getDay()\n  },\n\n  // Day of ISO week: 1, 2, ..., 7\n  'E': function (date) {\n    return date.getDay() || 7\n  },\n\n  // ISO week: 1, 2, ..., 53\n  'W': function (date) {\n    return getISOWeek(date)\n  },\n\n  // ISO week: 01, 02, ..., 53\n  'WW': function (date) {\n    return addLeadingZeros(getISOWeek(date), 2)\n  },\n\n  // Year: 00, 01, ..., 99\n  'YY': function (date) {\n    return addLeadingZeros(date.getFullYear(), 4).substr(2)\n  },\n\n  // Year: 1900, 1901, ..., 2099\n  'YYYY': function (date) {\n    return addLeadingZeros(date.getFullYear(), 4)\n  },\n\n  // ISO week-numbering year: 00, 01, ..., 99\n  'GG': function (date) {\n    return String(getISOYear(date)).substr(2)\n  },\n\n  // ISO week-numbering year: 1900, 1901, ..., 2099\n  'GGGG': function (date) {\n    return getISOYear(date)\n  },\n\n  // Hour: 0, 1, ... 23\n  'H': function (date) {\n    return date.getHours()\n  },\n\n  // Hour: 00, 01, ..., 23\n  'HH': function (date) {\n    return addLeadingZeros(date.getHours(), 2)\n  },\n\n  // Hour: 1, 2, ..., 12\n  'h': function (date) {\n    var hours = date.getHours()\n    if (hours === 0) {\n      return 12\n    } else if (hours > 12) {\n      return hours % 12\n    } else {\n      return hours\n    }\n  },\n\n  // Hour: 01, 02, ..., 12\n  'hh': function (date) {\n    return addLeadingZeros(formatters['h'](date), 2)\n  },\n\n  // Minute: 0, 1, ..., 59\n  'm': function (date) {\n    return date.getMinutes()\n  },\n\n  // Minute: 00, 01, ..., 59\n  'mm': function (date) {\n    return addLeadingZeros(date.getMinutes(), 2)\n  },\n\n  // Second: 0, 1, ..., 59\n  's': function (date) {\n    return date.getSeconds()\n  },\n\n  // Second: 00, 01, ..., 59\n  'ss': function (date) {\n    return addLeadingZeros(date.getSeconds(), 2)\n  },\n\n  // 1/10 of second: 0, 1, ..., 9\n  'S': function (date) {\n    return Math.floor(date.getMilliseconds() / 100)\n  },\n\n  // 1/100 of second: 00, 01, ..., 99\n  'SS': function (date) {\n    return addLeadingZeros(Math.floor(date.getMilliseconds() / 10), 2)\n  },\n\n  // Millisecond: 000, 001, ..., 999\n  'SSS': function (date) {\n    return addLeadingZeros(date.getMilliseconds(), 3)\n  },\n\n  // Timezone: -01:00, +00:00, ... +12:00\n  'Z': function (date) {\n    return formatTimezone(date.getTimezoneOffset(), ':')\n  },\n\n  // Timezone: -0100, +0000, ... +1200\n  'ZZ': function (date) {\n    return formatTimezone(date.getTimezoneOffset())\n  },\n\n  // Seconds timestamp: 512969520\n  'X': function (date) {\n    return Math.floor(date.getTime() / 1000)\n  },\n\n  // Milliseconds timestamp: 512969520900\n  'x': function (date) {\n    return date.getTime()\n  }\n}\n\nfunction buildFormatFn (formatStr, localeFormatters, formattingTokensRegExp) {\n  var array = formatStr.match(formattingTokensRegExp)\n  var length = array.length\n\n  var i\n  var formatter\n  for (i = 0; i < length; i++) {\n    formatter = localeFormatters[array[i]] || formatters[array[i]]\n    if (formatter) {\n      array[i] = formatter\n    } else {\n      array[i] = removeFormattingTokens(array[i])\n    }\n  }\n\n  return function (date) {\n    var output = ''\n    for (var i = 0; i < length; i++) {\n      if (array[i] instanceof Function) {\n        output += array[i](date, formatters)\n      } else {\n        output += array[i]\n      }\n    }\n    return output\n  }\n}\n\nfunction removeFormattingTokens (input) {\n  if (input.match(/\\[[\\s\\S]/)) {\n    return input.replace(/^\\[|]$/g, '')\n  }\n  return input.replace(/\\\\/g, '')\n}\n\nfunction formatTimezone (offset, delimeter) {\n  delimeter = delimeter || ''\n  var sign = offset > 0 ? '-' : '+'\n  var absOffset = Math.abs(offset)\n  var hours = Math.floor(absOffset / 60)\n  var minutes = absOffset % 60\n  return sign + addLeadingZeros(hours, 2) + delimeter + addLeadingZeros(minutes, 2)\n}\n\nfunction addLeadingZeros (number, targetLength) {\n  var output = Math.abs(number).toString()\n  while (output.length < targetLength) {\n    output = '0' + output\n  }\n  return output\n}\n\nmodule.exports = format\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/format/index.js\n// module id = 66\n// module chunks = 0","var parse = require('../parse/index.js')\nvar startOfYear = require('../start_of_year/index.js')\nvar differenceInCalendarDays = require('../difference_in_calendar_days/index.js')\n\n/**\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param {Date|String|Number} date - the given date\n * @returns {Number} the day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * var result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nfunction getDayOfYear (dirtyDate) {\n  var date = parse(dirtyDate)\n  var diff = differenceInCalendarDays(date, startOfYear(date))\n  var dayOfYear = diff + 1\n  return dayOfYear\n}\n\nmodule.exports = getDayOfYear\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/get_day_of_year/index.js\n// module id = 67\n// module chunks = 0","var parse = require('../parse/index.js')\nvar startOfISOWeek = require('../start_of_iso_week/index.js')\nvar startOfISOYear = require('../start_of_iso_year/index.js')\n\nvar MILLISECONDS_IN_WEEK = 604800000\n\n/**\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param {Date|String|Number} date - the given date\n * @returns {Number} the ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * var result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nfunction getISOWeek (dirtyDate) {\n  var date = parse(dirtyDate)\n  var diff = startOfISOWeek(date).getTime() - startOfISOYear(date).getTime()\n\n  // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1\n}\n\nmodule.exports = getISOWeek\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/get_iso_week/index.js\n// module id = 68\n// module chunks = 0","var isDate = require('../is_date/index.js')\n\n/**\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param {Date} date - the date to check\n * @returns {Boolean} the date is valid\n * @throws {TypeError} argument must be an instance of Date\n *\n * @example\n * // For the valid date:\n * var result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the invalid date:\n * var result = isValid(new Date(''))\n * //=> false\n */\nfunction isValid (dirtyDate) {\n  if (isDate(dirtyDate)) {\n    return !isNaN(dirtyDate)\n  } else {\n    throw new TypeError(toString.call(dirtyDate) + ' is not an instance of Date')\n  }\n}\n\nmodule.exports = isValid\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/is_valid/index.js\n// module id = 69\n// module chunks = 0","var commonFormatterKeys = [\n  'M', 'MM', 'Q', 'D', 'DD', 'DDD', 'DDDD', 'd',\n  'E', 'W', 'WW', 'YY', 'YYYY', 'GG', 'GGGG',\n  'H', 'HH', 'h', 'hh', 'm', 'mm',\n  's', 'ss', 'S', 'SS', 'SSS',\n  'Z', 'ZZ', 'X', 'x'\n]\n\nfunction buildFormattingTokensRegExp (formatters) {\n  var formatterKeys = []\n  for (var key in formatters) {\n    if (formatters.hasOwnProperty(key)) {\n      formatterKeys.push(key)\n    }\n  }\n\n  var formattingTokens = commonFormatterKeys\n    .concat(formatterKeys)\n    .sort()\n    .reverse()\n  var formattingTokensRegExp = new RegExp(\n    '(\\\\[[^\\\\[]*\\\\])|(\\\\\\\\)?' + '(' + formattingTokens.join('|') + '|.)', 'g'\n  )\n\n  return formattingTokensRegExp\n}\n\nmodule.exports = buildFormattingTokensRegExp\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/locale/_lib/build_formatting_tokens_reg_exp/index.js\n// module id = 70\n// module chunks = 0","function buildDistanceInWordsLocale () {\n  var distanceInWordsLocale = {\n    lessThanXSeconds: {\n      one: 'less than a second',\n      other: 'less than {{count}} seconds'\n    },\n\n    xSeconds: {\n      one: '1 second',\n      other: '{{count}} seconds'\n    },\n\n    halfAMinute: 'half a minute',\n\n    lessThanXMinutes: {\n      one: 'less than a minute',\n      other: 'less than {{count}} minutes'\n    },\n\n    xMinutes: {\n      one: '1 minute',\n      other: '{{count}} minutes'\n    },\n\n    aboutXHours: {\n      one: 'about 1 hour',\n      other: 'about {{count}} hours'\n    },\n\n    xHours: {\n      one: '1 hour',\n      other: '{{count}} hours'\n    },\n\n    xDays: {\n      one: '1 day',\n      other: '{{count}} days'\n    },\n\n    aboutXMonths: {\n      one: 'about 1 month',\n      other: 'about {{count}} months'\n    },\n\n    xMonths: {\n      one: '1 month',\n      other: '{{count}} months'\n    },\n\n    aboutXYears: {\n      one: 'about 1 year',\n      other: 'about {{count}} years'\n    },\n\n    xYears: {\n      one: '1 year',\n      other: '{{count}} years'\n    },\n\n    overXYears: {\n      one: 'over 1 year',\n      other: 'over {{count}} years'\n    },\n\n    almostXYears: {\n      one: 'almost 1 year',\n      other: 'almost {{count}} years'\n    }\n  }\n\n  function localize (token, count, options) {\n    options = options || {}\n\n    var result\n    if (typeof distanceInWordsLocale[token] === 'string') {\n      result = distanceInWordsLocale[token]\n    } else if (count === 1) {\n      result = distanceInWordsLocale[token].one\n    } else {\n      result = distanceInWordsLocale[token].other.replace('{{count}}', count)\n    }\n\n    if (options.addSuffix) {\n      if (options.comparison > 0) {\n        return 'in ' + result\n      } else {\n        return result + ' ago'\n      }\n    }\n\n    return result\n  }\n\n  return {\n    localize: localize\n  }\n}\n\nmodule.exports = buildDistanceInWordsLocale\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/locale/en/build_distance_in_words_locale/index.js\n// module id = 71\n// module chunks = 0","var buildFormattingTokensRegExp = require('../../_lib/build_formatting_tokens_reg_exp/index.js')\n\nfunction buildFormatLocale () {\n  // Note: in English, the names of days of the week and months are capitalized.\n  // If you are making a new locale based on this one, check if the same is true for the language you're working on.\n  // Generally, formatted dates should look like they are in the middle of a sentence,\n  // e.g. in Spanish language the weekdays and months should be in the lowercase.\n  var months3char = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']\n  var monthsFull = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n  var weekdays2char = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']\n  var weekdays3char = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  var weekdaysFull = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n  var meridiemUppercase = ['AM', 'PM']\n  var meridiemLowercase = ['am', 'pm']\n  var meridiemFull = ['a.m.', 'p.m.']\n\n  var formatters = {\n    // Month: Jan, Feb, ..., Dec\n    'MMM': function (date) {\n      return months3char[date.getMonth()]\n    },\n\n    // Month: January, February, ..., December\n    'MMMM': function (date) {\n      return monthsFull[date.getMonth()]\n    },\n\n    // Day of week: Su, Mo, ..., Sa\n    'dd': function (date) {\n      return weekdays2char[date.getDay()]\n    },\n\n    // Day of week: Sun, Mon, ..., Sat\n    'ddd': function (date) {\n      return weekdays3char[date.getDay()]\n    },\n\n    // Day of week: Sunday, Monday, ..., Saturday\n    'dddd': function (date) {\n      return weekdaysFull[date.getDay()]\n    },\n\n    // AM, PM\n    'A': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemUppercase[1] : meridiemUppercase[0]\n    },\n\n    // am, pm\n    'a': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemLowercase[1] : meridiemLowercase[0]\n    },\n\n    // a.m., p.m.\n    'aa': function (date) {\n      return (date.getHours() / 12) >= 1 ? meridiemFull[1] : meridiemFull[0]\n    }\n  }\n\n  // Generate ordinal version of formatters: M -> Mo, D -> Do, etc.\n  var ordinalFormatters = ['M', 'D', 'DDD', 'd', 'Q', 'W']\n  ordinalFormatters.forEach(function (formatterToken) {\n    formatters[formatterToken + 'o'] = function (date, formatters) {\n      return ordinal(formatters[formatterToken](date))\n    }\n  })\n\n  return {\n    formatters: formatters,\n    formattingTokensRegExp: buildFormattingTokensRegExp(formatters)\n  }\n}\n\nfunction ordinal (number) {\n  var rem100 = number % 100\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st'\n      case 2:\n        return number + 'nd'\n      case 3:\n        return number + 'rd'\n    }\n  }\n  return number + 'th'\n}\n\nmodule.exports = buildFormatLocale\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/locale/en/build_format_locale/index.js\n// module id = 72\n// module chunks = 0","var buildDistanceInWordsLocale = require('./build_distance_in_words_locale/index.js')\nvar buildFormatLocale = require('./build_format_locale/index.js')\n\n/**\n * @category Locales\n * @summary English locale.\n */\nmodule.exports = {\n  distanceInWords: buildDistanceInWordsLocale(),\n  format: buildFormatLocale()\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/locale/en/index.js\n// module id = 73\n// module chunks = 0","var parse = require('../parse/index.js')\n\n/**\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @param {Date|String|Number} date - the original date\n * @returns {Date} the start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * var result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nfunction startOfDay (dirtyDate) {\n  var date = parse(dirtyDate)\n  date.setHours(0, 0, 0, 0)\n  return date\n}\n\nmodule.exports = startOfDay\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/start_of_day/index.js\n// module id = 74\n// module chunks = 0","var getISOYear = require('../get_iso_year/index.js')\nvar startOfISOWeek = require('../start_of_iso_week/index.js')\n\n/**\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param {Date|String|Number} date - the original date\n * @returns {Date} the start of an ISO year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * var result = startOfISOYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nfunction startOfISOYear (dirtyDate) {\n  var year = getISOYear(dirtyDate)\n  var fourthOfJanuary = new Date(0)\n  fourthOfJanuary.setFullYear(year, 0, 4)\n  fourthOfJanuary.setHours(0, 0, 0, 0)\n  var date = startOfISOWeek(fourthOfJanuary)\n  return date\n}\n\nmodule.exports = startOfISOYear\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/start_of_iso_year/index.js\n// module id = 75\n// module chunks = 0","var parse = require('../parse/index.js')\n\n/**\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @param {Date|String|Number} date - the original date\n * @param {Object} [options] - the object with options\n * @param {Number} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Date} the start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * var result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), {weekStartsOn: 1})\n * //=> Mon Sep 01 2014 00:00:00\n */\nfunction startOfWeek (dirtyDate, dirtyOptions) {\n  var weekStartsOn = dirtyOptions ? (Number(dirtyOptions.weekStartsOn) || 0) : 0\n\n  var date = parse(dirtyDate)\n  var day = date.getDay()\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn\n\n  date.setDate(date.getDate() - diff)\n  date.setHours(0, 0, 0, 0)\n  return date\n}\n\nmodule.exports = startOfWeek\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/start_of_week/index.js\n// module id = 76\n// module chunks = 0","var parse = require('../parse/index.js')\n\n/**\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @param {Date|String|Number} date - the original date\n * @returns {Date} the start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * var result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nfunction startOfYear (dirtyDate) {\n  var cleanDate = parse(dirtyDate)\n  var date = new Date(0)\n  date.setFullYear(cleanDate.getFullYear(), 0, 1)\n  date.setHours(0, 0, 0, 0)\n  return date\n}\n\nmodule.exports = startOfYear\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/date-fns/start_of_year/index.js\n// module id = 77\n// module chunks = 0","/**\n * NOTE: The Sequelize CLI expects config to be either .json or .js. As\n * as result, this JS file has to exist in order to execute migrations.\n * The index.ts file in this same directory is identical to this, but\n * enforces the typed IDatabaseConfig interface.\n */\n\nconst appConfig = require('../../config')\n\nmodule.exports = appConfig.db\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server/db/config/index.js\n// module id = 78\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 79\n// module chunks = 0","module.exports = require(\"continuation-local-storage\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"continuation-local-storage\"\n// module id = 80\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 81\n// module chunks = 0","module.exports = require(\"express-graphql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-graphql\"\n// module id = 82\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 83\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 84\n// module chunks = 0","module.exports = require(\"html-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"html-webpack-plugin\"\n// module id = 85\n// module chunks = 0","module.exports = require(\"passport-facebook\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-facebook\"\n// module id = 86\n// module chunks = 0","module.exports = require(\"postcss-assets\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"postcss-assets\"\n// module id = 87\n// module chunks = 0","module.exports = require(\"postcss-cssnext\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"postcss-cssnext\"\n// module id = 88\n// module chunks = 0","module.exports = require(\"postcss-import\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"postcss-import\"\n// module id = 89\n// module chunks = 0","module.exports = require(\"raven\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"raven\"\n// module id = 90\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 91\n// module chunks = 0","module.exports = require(\"webpack-combine-loaders\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-combine-loaders\"\n// module id = 92\n// module chunks = 0","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 93\n// module chunks = 0","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 94\n// module chunks = 0","module.exports = require(\"webpack-merge\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-merge\"\n// module id = 95\n// module chunks = 0"],"sourceRoot":""}